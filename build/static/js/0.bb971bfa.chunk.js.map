{"version":3,"sources":["services/search.js","components/forms/SchoolClassForm.jsx"],"names":["baseUrl","process","token","teachers","payload","a","config","headers","Authorization","axios","post","response","data","Promise","reject","pupils","specialties","setToken","newToken","mapDispatchToProps","setNotification","createSchoolClass","updateSchoolClass","connect","state","user","schoolClass","mode","useState","editMode","setEditMode","pupilError","setPupilError","useEffect","searchService","schoolClassesService","teachersList","setTeachersList","pupilsList","setPupilsList","specialtiesList","setSpecialtiesList","checkSubmitBtnState","handleSchoolClass","values","setErrors","resetForm","length","existingSchoolClass","newSchoolClass","then","message","variant","catch","error","cause","name","console","log","id","schoolClassFormSchema","Yup","shape","title","min","max","required","info","teacher","specialty","of","Container","className","initialValues","map","pupil","enableReinitialize","onSubmit","validationSchema","handleSubmit","handleChange","handleBlur","touched","errors","Form","data-cy","noValidate","Row","Group","controlId","as","Col","Label","Control","type","onChange","onBlur","value","isValid","isInvalid","Feedback","rows","list","onKeyUp","event","query","getTeachers","target","key","getSpecialties","render","arrayHelpers","index","xs","getPupils","msg","Button","block","size","onClick","remove","form","icon","faMinus","push","faPlus","varialt","label"],"mappings":"qOACMA,EAAO,UAAMC,gCAAN,eAETC,EAAQ,KAgBNC,EAAQ,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,6DAEVC,EAAS,CACdC,QAAS,CAAEC,cAAeN,IAHX,kBAOQO,IAAMC,KAAN,UAAcV,EAAd,aAAkCI,EAASE,GAPnD,cAOTK,EAPS,yBAQRA,EAASC,MARD,yDAURC,QAAQC,OAAO,KAAMH,WAVb,yDAAH,sDAoDC,GAAEI,OAjCL,uCAAG,WAAOX,GAAP,iBAAAC,EAAA,6DAERC,EAAS,CACdC,QAAS,CAAEC,cAAeN,IAHb,kBAOUO,IAAMC,KAAN,UAAcV,EAAd,WAAgCI,EAASE,GAPnD,cAOPK,EAPO,yBAQNA,EAASC,MARH,yDAUNC,QAAQC,OAAO,KAAMH,WAVf,yDAAH,sDAiCaR,WAAUa,YAdlB,uCAAG,WAAMZ,GAAN,iBAAAC,EAAA,6DAEbC,EAAS,CACdC,QAAS,CAAEC,cAAeN,IAHR,kBAOKO,IAAMC,KAAN,UAAcV,EAAd,gBAAqCI,EAASE,GAPnD,cAOZK,EAPY,yBAQXA,EAASC,MARE,yDAUXC,QAAQC,OAAO,KAAMH,WAVV,yDAAH,sDAc+BM,SA7D/B,SAAAC,GAChBhB,EAAK,iBAAagB,K,4FCmcbC,EAAqB,CAC1BC,oBACAC,sBACAC,uBAGcC,uBAZS,SAACC,GACxB,MAAO,CACNC,KAAMD,EAAMC,QAYbN,EAFcI,EAncS,SAAC,GAMZ,IALZG,EAKW,EALXA,YACAD,EAIW,EAJXA,KACAL,EAGW,EAHXA,gBACAC,EAEW,EAFXA,kBACAC,EACW,EADXA,kBACAK,EAAW,EAAXA,KAAW,EAEqBC,oBAAS,GAF9B,mBAEJC,EAFI,KAEMC,EAFN,OAGyBF,oBAAS,GAHlC,mBAGJG,EAHI,KAGQC,EAHR,KAKXC,qBAAU,WACI,SAATN,GACHG,GAAY,KAGX,IAEHG,qBAAU,WACTC,EAAcjB,SAASQ,EAAKvB,OAC5BiC,IAAqBlB,SAASQ,EAAKvB,SACjC,CAACuB,IAfO,MAkB6BG,mBAAS,IAlBtC,mBAkBJQ,EAlBI,KAkBUC,EAlBV,OAmByBT,mBAAS,IAnBlC,mBAmBJU,EAnBI,KAmBQC,EAnBR,OAoBmCX,mBAAS,IApB5C,mBAoBJY,EApBI,KAoBaC,EApBb,KA6DLC,EAAsB,SAAC,GACd,KAD6B,EAAb3B,OACvB,GACJiB,GAAc,GACdA,GAAc,IAGZW,EAAoB,SAACC,EAAQC,EAAWC,GAGhB,IAAzBF,EAAO7B,OAAOgC,OAKlBlB,EACGmB,EAAoBJ,GACpBK,EAAeL,EAAQC,EAAWC,GANpCd,GAAc,IASViB,EAAiB,SAACL,EAAQC,EAAWC,GAC1CzB,EAAkBuB,GAChBM,MAAK,WACL9B,EAAgB,CACf+B,QAAS,wJACTC,QAAS,WACP,GACHN,OAEAO,OAAM,SAAAC,GAAU,IAAD,iBACiBA,EAAM3C,SAASC,MAAvCuC,EADO,EACPA,QACM,SAFC,EACEI,OAEhBV,EAAU,CAAEW,KAAML,IAEnB/B,EAAgB,CACf+B,UACAC,QAAS,UACP,OAIAJ,EAAsB,SAACJ,GAC5Ba,QAAQC,IAAI,WAAYd,GACxBtB,EAAkBI,EAAYiC,GAAIf,GAChCM,MAAK,WACL9B,EAAgB,CACf+B,QAAS,oIACTC,QAAS,WACP,MAEHC,OAAM,SAAAC,GAAU,IACRH,EADO,eACUG,EAAM3C,SAASC,MAAhCuC,QACR/B,EAAgB,CACf+B,UACAC,QAAS,UACP,OAeAQ,EAAwBC,MAAaC,MAAM,CAChDC,MAAOF,MACLG,IAAI,EAAG,6FACPC,IAAI,IAAK,0GACTC,SAAS,qBACXC,KAAMN,MACJG,IAAI,EAAG,6FACPC,IAAI,IAAK,0GACTC,SAAS,0BACXE,QAASP,MACPG,IAAI,EAAG,6FACPC,IAAI,IAAK,0GACTC,SAAS,sBACXG,UAAWR,MACTG,IAAI,EAAG,6FACPC,IAAI,IAAK,0GACTC,SAAS,sBACXnD,OAAQ8C,MAAYS,GACnBT,MACEG,IAAI,EAAG,6FACPC,IAAI,IAAK,0GACTC,SAAS,wHAIb,OACC,kBAACK,EAAA,EAAD,KACC,wBAAIC,UAAU,gCACZ3C,EAAW,+DAAe,uCAD5B,6BAGA,kBAAC,IAAD,CACC4C,cAvCF5C,EAAQ,eACAH,EADA,CAEN0C,QAAS1C,EAAY0C,QAAQZ,KAC7Ba,UAAW3C,EAAY2C,UAAUN,MACjChD,OAAQW,EAAYX,OAAO2D,KAAI,SAAAC,GAAK,OAAIA,EAAMnB,UAE7C,CAAEO,MAAO,GAAII,KAAM,GAAIC,QAAS,GAAIC,UAAW,GAAItD,OAAQ,CAAC,KAkC7D6D,oBAAkB,EAClBC,SAAQ,uCAAE,WAAOjC,EAAP,oBAAAvC,EAAA,6DAAiByC,EAAjB,EAAiBA,UAAWD,EAA5B,EAA4BA,UAA5B,SACHF,EAAkBC,EAAQC,EAAWC,GADlC,2CAAF,wDAGRgC,iBAAkBlB,IAEjB,gBAAGmB,EAAH,EAAGA,aACHC,EADA,EACAA,aACAC,EAFA,EAEAA,WACArC,EAHA,EAGAA,OACAsC,EAJA,EAIAA,QACAC,EALA,EAKAA,OALA,OAOA,kBAACC,EAAA,EAAD,CACCC,UAAQ,oBACRC,YAAU,EACVT,SAAUE,EACVP,UAAU,aAGV,kBAACY,EAAA,EAAKG,IAAN,CAAUf,UAAU,iCACnB,kBAACY,EAAA,EAAKI,MAAN,CACCC,UACC5D,EAAQ,mCACuBH,EAAYiC,IACxC,2BACJ+B,GAAIC,IACJnB,UAAU,QAEV,kBAACY,EAAA,EAAKQ,MAAN,sEAGA,kBAACR,EAAA,EAAKS,QAAN,CACCC,KAAK,OACLtC,KAAK,QACL6B,UAAQ,cACRU,SAAUf,EACVgB,OAAQf,EACRgB,MAAOrD,EAAOmB,MACdmC,QAAShB,EAAQnB,QAAUoB,EAAOpB,MAClCoC,UAAWjB,EAAQnB,SAAWoB,EAAOpB,QAEtC,kBAACqB,EAAA,EAAKS,QAAQO,SAAd,CAAuBN,KAAK,WAC1BX,EAAOpB,SAMX,kBAACqB,EAAA,EAAKG,IAAN,CAAUf,UAAU,iCACnB,kBAACY,EAAA,EAAKI,MAAN,CACCC,UACC5D,EAAQ,kCACsBH,EAAYiC,IACvC,0BACJ+B,GAAIC,IACJnB,UAAU,QAEV,kBAACY,EAAA,EAAKQ,MAAN,0IAGA,kBAACR,EAAA,EAAKS,QAAN,CACCH,GAAG,WACHW,KAAK,IACL7C,KAAK,OACL6B,UAAQ,aACRU,SAAUf,EACVgB,OAAQf,EACRgB,MAAOrD,EAAOuB,KACd+B,QAAShB,EAAQf,OAASgB,EAAOhB,KACjCgC,UAAWjB,EAAQf,QAAUgB,EAAOhB,OAErC,kBAACiB,EAAA,EAAKS,QAAQO,SAAd,CAAuBN,KAAK,WAC1BX,EAAOhB,QAMX,kBAACiB,EAAA,EAAKG,IAAN,CAAUf,UAAU,iCACnB,kBAACY,EAAA,EAAKI,MAAN,CACCC,UACC5D,EAAQ,qCACyBH,EAAYiC,IAC1C,6BACJ+B,GAAIC,IACJnB,UAAU,QAEV,kBAACY,EAAA,EAAKQ,MAAN,mDAGA,kBAACR,EAAA,EAAKS,QAAN,CACCC,KAAK,OACLtC,KAAK,UACL6B,UAAQ,gBACRiB,KAAK,gBACLP,SAAUf,EACVuB,QAAS,SAAAC,GAAK,OA7OF,SAACP,GACpB,GAAIA,EAAMlD,QAAU,EAAG,CACtB,IAAM0D,EAAQ,CAAER,SAChB/D,EAAc/B,SAASsG,GACrBvD,MAAK,SAACtC,GACNyB,EAAgBzB,MAEhByC,OAAM,SAAAC,GACNG,QAAQH,MAAMA,OAqOQoD,CAAYF,EAAMG,OAAOV,QAC3CD,OAAQf,EACRgB,MAAOrD,EAAOwB,QACd8B,QAAShB,EAAQd,UAAYe,EAAOf,QACpC+B,UAAWjB,EAAQd,WAAae,EAAOf,UAExC,8BAAUT,GAAG,iBACXvB,EAAasC,KAAI,SAAClB,GAAD,OACjB,4BAAQoD,IAAKpD,EAAMyC,MAAOzC,QAG5B,kBAAC4B,EAAA,EAAKS,QAAQO,SAAd,CAAuBN,KAAK,WAC1BX,EAAOf,WAMX,kBAACgB,EAAA,EAAKG,IAAN,CAAUf,UAAU,iCACnB,kBAACY,EAAA,EAAKI,MAAN,CACCC,UACC5D,EAAQ,uCAC2BH,EAAYiC,IAC5C,+BACJ+B,GAAIC,IACJnB,UAAU,QAEV,kBAACY,EAAA,EAAKQ,MAAN,0DAGA,kBAACR,EAAA,EAAKS,QAAN,CACCC,KAAK,OACLtC,KAAK,YACL6B,UAAQ,kBACRiB,KAAK,mBACLP,SAAUf,EACVuB,QAAS,SAAAC,GAAK,OAvPC,SAAAP,GACtB,GAAIA,EAAMlD,QAAU,EAAG,CACtB,IAAM0D,EAAQ,CAAER,SAChB/D,EAAclB,YAAYyF,GACxBvD,MAAK,SAACtC,GACN6B,EAAmB7B,MAEnByC,OAAM,SAAAC,GACNG,QAAQH,MAAMA,OA+OQuD,CAAeL,EAAMG,OAAOV,QAC9CD,OAAQf,EACRgB,MAAOrD,EAAOyB,UACd6B,QAAShB,EAAQb,YAAcc,EAAOd,UACtC8B,UAAWjB,EAAQb,aAAec,EAAOd,YAE1C,8BAAUV,GAAG,oBACXnB,EAAgBkC,KAAI,SAACX,GAAD,OACpB,4BAAQ6C,IAAK7C,EAAOkC,MAAOlC,QAG7B,kBAACqB,EAAA,EAAKS,QAAQO,SAAd,CAAuBN,KAAK,WAC1BX,EAAOd,aAMX,kBAAC,IAAD,CACCb,KAAK,SACLsD,OAAQ,SAAAC,GAAY,OACnB,oCACC,kBAAC3B,EAAA,EAAKQ,MAAN,iCAGChD,EAAO7B,QAAU6B,EAAO7B,OAAOgC,OAAS,EACxCH,EAAO7B,OAAO2D,KAAI,SAACL,EAAW2C,GAAZ,OACjB,kBAAC5B,EAAA,EAAKG,IAAN,CAAUqB,IAAKI,EAAOxC,UAAU,8BAC/B,kBAACmB,EAAA,EAAD,CAAKsB,GAAI,IACR,kBAAC7B,EAAA,EAAKS,QAAN,CACCC,KAAK,OACLQ,KAAK,cACL9B,UAAU,OACVhB,KAAI,iBAAYwD,EAAZ,KACJf,MAAOrD,EAAO7B,OAAOiG,GACrBjB,SAAUf,EACVuB,QAAS,SAAAC,GAAK,OAxST,SAAAP,GACjB,GAAIA,EAAMlD,QAAU,EAAG,CACtB,IAAM0D,EAAQ,CAAER,SAChB/D,EAAcnB,OAAO0F,GACnBvD,MAAK,SAACtC,GACN2B,EAAc3B,MAEdyC,OAAM,SAAAC,GACNG,QAAQH,MAAMA,OAgSa4D,CAAUV,EAAMG,OAAOV,QACzCC,QAAShB,EAAQnE,SAAWoE,EAAOpE,SAGpC,8BAAU4C,GAAG,eACXrB,EAAWoC,KAAI,SAAClB,GAAD,OACf,4BAAQoD,IAAKpD,EAAMyC,MAAOzC,SAK7B,kBAACmC,EAAA,EAAD,CAAKsB,GAAI,GACR,kBAAC,IAAD,CACCzD,KAAI,iBAAYwD,EAAZ,KACJxC,UAAU,wBACVsC,OAAQ,SAAAK,GAAG,OACV,0BAAM3C,UAAU,6BACd2C,OAML,kBAACxB,EAAA,EAAD,CAAKsB,GAAI,EAAGzC,UAAU,iDACrB,kBAACe,EAAA,EAAD,CAAKf,UAAU,iCACd,kBAACmB,EAAA,EAAD,CAAKnB,UAAU,QAEd,kBAAC4C,EAAA,EAAD,CACCC,OAAK,EACLjE,QAAQ,iBAAiBkE,KAAK,KAC9BC,QAAS,WACRR,EAAaS,OAAOR,GACpBtE,EAAoBqE,EAAaU,KAAK7E,UAGvC,kBAAC,IAAD,CAAiB8E,KAAMC,QAGzB,kBAAChC,EAAA,EAAD,CAAKnB,UAAU,QAEd,kBAAC4C,EAAA,EAAD,CACCC,OAAK,EACLjE,QAAQ,kBAAkBkE,KAAK,KAC/BC,QAAS,WAAQR,EAAaa,KAAK,IAClClF,EAAoBqE,EAAaU,KAAK7E,UAGvC,kBAAC,IAAD,CAAiB8E,KAAMG,cAQ7B,kBAACT,EAAA,EAAD,CACC5C,UAAU,OACVpB,QAASrB,EAAa,iBAAmB,kBACzC+F,QAAQ,kBACRP,QAAS,WACRR,EAAaa,KAAK,IAClBlF,EAAoBqE,EAAaU,KAAK7E,UANxC,qEAiBJ,kBAACwC,EAAA,EAAKG,IAAN,CAAUf,UAAU,6CACnB,kBAACY,EAAA,EAAKI,MAAN,CACCE,GAAIC,IACJnB,UAAU,QAEV,kBAAC,IAAD,CACC6C,OAAK,EACL7C,UAAU,4BACVpB,QAAQ,UACR0C,KAAK,SACLiC,MAAM","file":"static/js/0.bb971bfa.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = `${process.env.REACT_APP_API_URL}/api/search`\n\nlet token = null\n\n/**\n * Set user auth token\n * @param {string} newToken Current user auth token\n */\n\nconst setToken = newToken => {\n\ttoken = `bearer ${newToken}`\n}\n\n/**\n * Search teachers\n *\n * @returns {Object} - Response data\n */\nconst teachers = async (payload) => {\n\n\tconst config = {\n\t\theaders: { Authorization: token }\n\t}\n\n\ttry {\n\t\tconst response = await axios.post(`${baseUrl}/teachers`, payload, config)\n\t\treturn response.data\n\t} catch (error) {\n\t\treturn Promise.reject(error.response)\n\t}\n}\n\n/**\n * Search pupils\n *\n * @returns {Object} - Response data\n */\nconst pupils = async (payload) => {\n\n\tconst config = {\n\t\theaders: { Authorization: token }\n\t}\n\n\ttry {\n\t\tconst response = await axios.post(`${baseUrl}/pupils`, payload, config)\n\t\treturn response.data\n\t} catch (error) {\n\t\treturn Promise.reject(error.response)\n\t}\n}\n\n/**\n * Search specialties\n *\n * @returns {Object} - Response data\n */\nconst specialties = async payload => {\n\n\tconst config = {\n\t\theaders: { Authorization: token }\n\t}\n\n\ttry {\n\t\tconst response = await axios.post(`${baseUrl}/specialties`, payload, config)\n\t\treturn response.data\n\t} catch (error) {\n\t\treturn Promise.reject(error.response)\n\t}\n}\n\nexport default { pupils, teachers, specialties, setToken }\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { setNotification } from '../../reducers/notificationReducer'\nimport { createSchoolClass, updateSchoolClass } from '../../reducers/schoolClassesReducer'\nimport searchService from '../../services/search'\nimport schoolClassesService from '../../services/schoolClasses'\n\nimport { Formik, FieldArray, ErrorMessage } from 'formik'\nimport * as Yup from 'yup'\nimport PropTypes from 'prop-types'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons'\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap'\nimport ButtonComponent from '../common/Button'\n\n\nconst SchoolClassForm = ({\n\tschoolClass,\n\tuser,\n\tsetNotification,\n\tcreateSchoolClass,\n\tupdateSchoolClass,\n\tmode }) => {\n\n\tconst [editMode, setEditMode] = useState(false)\n\tconst [pupilError, setPupilError] = useState(false)\n\n\tuseEffect(() => {\n\t\tif (mode === 'edit') {\n\t\t\tsetEditMode(true)\n\t\t}\n\t// eslint-disable-next-line\n\t}, [])\n\n\tuseEffect(() => {\n\t\tsearchService.setToken(user.token)\n\t\tschoolClassesService.setToken(user.token)\n\t}, [user])\n\n\t// lists for form input autocopmlete suggestions\n\tconst [teachersList, setTeachersList] = useState([])\n\tconst [pupilsList, setPupilsList] = useState([])\n\tconst [specialtiesList, setSpecialtiesList] = useState([])\n\n\tconst getTeachers = (value) => {\n\t\tif (value.length >= 2) {\n\t\t\tconst query = { value }\n\t\t\tsearchService.teachers(query)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tsetTeachersList(data)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst getPupils = value => {\n\t\tif (value.length >= 2) {\n\t\t\tconst query = { value }\n\t\t\tsearchService.pupils(query)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tsetPupilsList(data)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst getSpecialties = value => {\n\t\tif (value.length >= 2) {\n\t\t\tconst query = { value }\n\t\t\tsearchService.specialties(query)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tsetSpecialtiesList(data)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst checkSubmitBtnState = ({ pupils }) => {\n\t\tpupils[0] === ''\n\t\t\t? setPupilError(true)\n\t\t\t: setPupilError(false)\n\t}\n\n\tconst handleSchoolClass = (values, setErrors, resetForm) => {\n\t\t// check if at least one pupil was added\n\t\t// need this cause of variable number of pupils fields\n\t\tif (values.pupils.length === 0) {\n\t\t\tsetPupilError(true)\n\t\t\treturn\n\t\t}\n\t\t// if current from mode is edit or create..\n\t\teditMode\n\t\t\t? existingSchoolClass(values)\n\t\t\t: newSchoolClass(values, setErrors, resetForm)\n\t}\n\n\tconst newSchoolClass = (values, setErrors, resetForm) => {\n\t\tcreateSchoolClass(values)\n\t\t\t.then(() => {\n\t\t\t\tsetNotification({\n\t\t\t\t\tmessage: 'Новий клас був успішно додан.',\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t}, 5)\n\t\t\t\tresetForm()\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconst { message, cause } = { ...error.response.data }\n\t\t\t\tif (cause === 'name') { // this!\n\t\t\t\t\tsetErrors({ name: message })\n\t\t\t\t}\n\t\t\t\tsetNotification({\n\t\t\t\t\tmessage,\n\t\t\t\t\tvariant: 'danger'\n\t\t\t\t}, 5)\n\t\t\t})\n\t}\n\n\tconst existingSchoolClass = (values) => {\n\t\tconsole.log('Updating', values)\n\t\tupdateSchoolClass(schoolClass.id, values)\n\t\t\t.then(() => {\n\t\t\t\tsetNotification({\n\t\t\t\t\tmessage: 'Зміни успішно збережено.',\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t}, 5)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconst { message } = { ...error.response.data }\n\t\t\t\tsetNotification({\n\t\t\t\t\tmessage,\n\t\t\t\t\tvariant: 'danger'\n\t\t\t\t}, 5)\n\t\t\t})\n\t}\n\n\n\t// form data and schema\n\tconst initialFormValues = () =>\n\t\teditMode\n\t\t\t? { ...schoolClass,\n\t\t\t\tteacher: schoolClass.teacher.name,\n\t\t\t\tspecialty: schoolClass.specialty.title,\n\t\t\t\tpupils: schoolClass.pupils.map(pupil => pupil.name)\n\t\t\t}\n\t\t\t: { title: '', info: '', teacher: '', specialty: '', pupils: [''] }\n\n\tconst schoolClassFormSchema = Yup.object().shape({\n\t\ttitle: Yup.string()\n\t\t\t.min(2, 'Не менш 2 символів.')\n\t\t\t.max(128, 'Максимум 128 символів.')\n\t\t\t.required('Enter class title'),\n\t\tinfo: Yup.string()\n\t\t\t.min(2, 'Не менш 2 символів.')\n\t\t\t.max(255, 'Максимум 255 символів.')\n\t\t\t.required('Enter some description'),\n\t\tteacher: Yup.string()\n\t\t\t.min(2, 'Не менш 2 символів.')\n\t\t\t.max(128, 'Максимум 128 символів.')\n\t\t\t.required('Enter teacher name'),\n\t\tspecialty: Yup.string()\n\t\t\t.min(2, 'Не менш 2 символів.')\n\t\t\t.max(128, 'Максимум 128 символів.')\n\t\t\t.required('Enter teacher name'),\n\t\tpupils: Yup.array().of(\n\t\t\tYup.string()\n\t\t\t\t.min(2, 'Не менш 2 символів.')\n\t\t\t\t.max(128, 'Максимум 128 символів.')\n\t\t\t\t.required('Це поле є обов\\'язковим.')\n\t\t)\n\t})\n\n\treturn (\n\t\t<Container>\n\t\t\t<h2 className=\"text-center custom-font py-4\">\n\t\t\t\t{editMode ? 'Редагувати' : 'Додати'} клас\n\t\t\t</h2>\n\t\t\t<Formik\n\t\t\t\tinitialValues={initialFormValues()}\n\t\t\t\tenableReinitialize\n\t\t\t\tonSubmit={async (values, { resetForm, setErrors }) => {\n\t\t\t\t\tawait handleSchoolClass(values, setErrors, resetForm)\n\t\t\t\t}}\n\t\t\t\tvalidationSchema={schoolClassFormSchema}\n\t\t\t>\n\t\t\t\t{({ handleSubmit,\n\t\t\t\t\thandleChange,\n\t\t\t\t\thandleBlur,\n\t\t\t\t\tvalues,\n\t\t\t\t\ttouched,\n\t\t\t\t\terrors,\n\t\t\t\t}) => (\n\t\t\t\t\t<Form\n\t\t\t\t\t\tdata-cy=\"school-class-form\"\n\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\t\tclassName=\"text-left\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* School class title */}\n\t\t\t\t\t\t<Form.Row className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t<Form.Group\n\t\t\t\t\t\t\t\tcontrolId={\n\t\t\t\t\t\t\t\t\teditMode\n\t\t\t\t\t\t\t\t\t\t? `school-class-title-input-${schoolClass.id}`\n\t\t\t\t\t\t\t\t\t\t: 'school-class-title-input'}\n\t\t\t\t\t\t\t\tas={Col}\n\t\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\t\tНазва класу\n\t\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tdata-cy=\"title-input\"\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\tvalue={values.title}\n\t\t\t\t\t\t\t\t\tisValid={touched.title && !errors.title}\n\t\t\t\t\t\t\t\t\tisInvalid={touched.title && !!errors.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\n\t\t\t\t\t\t\t\t\t{errors.title}\n\t\t\t\t\t\t\t\t</Form.Control.Feedback>\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t\t{/* School class info */}\n\t\t\t\t\t\t<Form.Row className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t<Form.Group\n\t\t\t\t\t\t\t\tcontrolId={\n\t\t\t\t\t\t\t\t\teditMode\n\t\t\t\t\t\t\t\t\t\t? `school-class-info-input-${schoolClass.id}`\n\t\t\t\t\t\t\t\t\t\t: 'school-class-info-input'}\n\t\t\t\t\t\t\t\tas={Col}\n\t\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\t\tОпис/інформація про клас\n\t\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\tas=\"textarea\"\n\t\t\t\t\t\t\t\t\trows=\"3\"\n\t\t\t\t\t\t\t\t\tname=\"info\"\n\t\t\t\t\t\t\t\t\tdata-cy=\"info-input\"\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\tvalue={values.info}\n\t\t\t\t\t\t\t\t\tisValid={touched.info && !errors.info}\n\t\t\t\t\t\t\t\t\tisInvalid={touched.info && !!errors.info}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\n\t\t\t\t\t\t\t\t\t{errors.info}\n\t\t\t\t\t\t\t\t</Form.Control.Feedback>\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t\t{/* School class teacher */}\n\t\t\t\t\t\t<Form.Row className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t<Form.Group\n\t\t\t\t\t\t\t\tcontrolId={\n\t\t\t\t\t\t\t\t\teditMode\n\t\t\t\t\t\t\t\t\t\t? `school-class-teacher-input-${schoolClass.id}`\n\t\t\t\t\t\t\t\t\t\t: 'school-class-teacher-input'}\n\t\t\t\t\t\t\t\tas={Col}\n\t\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\t\tВчітель\n\t\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"teacher\"\n\t\t\t\t\t\t\t\t\tdata-cy=\"teacher-input\"\n\t\t\t\t\t\t\t\t\tlist=\"teachers-list\"\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tonKeyUp={event => getTeachers(event.target.value)}\n\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\tvalue={values.teacher}\n\t\t\t\t\t\t\t\t\tisValid={touched.teacher && !errors.teacher}\n\t\t\t\t\t\t\t\t\tisInvalid={touched.teacher && !!errors.teacher}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<datalist id=\"teachers-list\">\n\t\t\t\t\t\t\t\t\t{teachersList.map((name) =>\n\t\t\t\t\t\t\t\t\t\t<option key={name} value={name} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</datalist>\n\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\n\t\t\t\t\t\t\t\t\t{errors.teacher}\n\t\t\t\t\t\t\t\t</Form.Control.Feedback>\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t\t{/* School class specialty */}\n\t\t\t\t\t\t<Form.Row className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t<Form.Group\n\t\t\t\t\t\t\t\tcontrolId={\n\t\t\t\t\t\t\t\t\teditMode\n\t\t\t\t\t\t\t\t\t\t? `school-class-specialty-input-${schoolClass.id}`\n\t\t\t\t\t\t\t\t\t\t: 'school-class-specialty-input'}\n\t\t\t\t\t\t\t\tas={Col}\n\t\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\t\tФах класу\n\t\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"specialty\"\n\t\t\t\t\t\t\t\t\tdata-cy=\"specialty-input\"\n\t\t\t\t\t\t\t\t\tlist=\"specialties-list\"\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tonKeyUp={event => getSpecialties(event.target.value)}\n\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\tvalue={values.specialty}\n\t\t\t\t\t\t\t\t\tisValid={touched.specialty && !errors.specialty}\n\t\t\t\t\t\t\t\t\tisInvalid={touched.specialty && !!errors.specialty}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<datalist id=\"specialties-list\">\n\t\t\t\t\t\t\t\t\t{specialtiesList.map((title) =>\n\t\t\t\t\t\t\t\t\t\t<option key={title} value={title} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</datalist>\n\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\n\t\t\t\t\t\t\t\t\t{errors.specialty}\n\t\t\t\t\t\t\t\t</Form.Control.Feedback>\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t\t{/* School pupils list */}\n\t\t\t\t\t\t<FieldArray\n\t\t\t\t\t\t\tname=\"pupils\"\n\t\t\t\t\t\t\trender={arrayHelpers => (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\t\t\tУчні\n\t\t\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t\t\t{values.pupils && values.pupils.length > 0 ? (\n\t\t\t\t\t\t\t\t\t\tvalues.pupils.map((specialty, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<Form.Row key={index} className=\"d-flex justify-content-end\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlist=\"pupils-list\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`pupils[${index}]`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={values.pupils[index]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyUp={event => getPupils(event.target.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisValid={touched.pupils && !errors.pupils}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// isInvalid={touched.specialties && !!errors.specialties}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<datalist id=\"pupils-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{pupilsList.map((name) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={name} value={name} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</datalist>\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<Col xs={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`pupils[${index}]`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"border border-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trender={msg => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"form-validation-error-mk2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{msg}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<Col xs={4} className=\"my-2 align-items-end border1 border-secondary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Row className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col className=\"pr-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* remove pupil from the list */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-danger\" size=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tarrayHelpers.remove(index)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckSubmitBtnState(arrayHelpers.form.values)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faMinus} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col className=\"pl-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* add an empty pupil input */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-success\" size=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { arrayHelpers.push('')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckSubmitBtnState(arrayHelpers.form.values)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faPlus} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Row>\n\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"my-2\"\n\t\t\t\t\t\t\t\t\t\t\tvariant={pupilError ? 'outline-danger' : 'outline-primary'}\n\t\t\t\t\t\t\t\t\t\t\tvarialt=\"outline-primary\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tarrayHelpers.push('')\n\t\t\t\t\t\t\t\t\t\t\t\tcheckSubmitBtnState(arrayHelpers.form.values)\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t{/* show this btn when if user has removed all specialties from the list */}\n\t\t\t\t\t\t\t\t\t\t\tДодати учня\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* Button */}\n\t\t\t\t\t\t<Form.Row className=\"d-flex justify-content-center text-center\">\n\t\t\t\t\t\t\t<Form.Group\n\t\t\t\t\t\t\t\tas={Col}\n\t\t\t\t\t\t\t\tclassName=\"pt-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ButtonComponent\n\t\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\t\tclassName=\"px-4 primary-color-shadow\"\n\t\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tlabel=\"Додати\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t</Form.Row>\n\t\t\t\t\t</Form>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t</Container>\n\t)\n}\n\nSchoolClassForm.propTypes = {\n\tschoolClass: PropTypes.object,\n\tuser: PropTypes.object.isRequired,\n\tsetNotification: PropTypes.func.isRequired,\n\tcreateSchoolClass: PropTypes.func.isRequired,\n\tupdateSchoolClass: PropTypes.func.isRequired,\n\tmode: PropTypes.oneOf(['create', 'edit']).isRequired\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tuser: state.user\n\t}\n}\n\nconst mapDispatchToProps = {\n\tsetNotification,\n\tcreateSchoolClass,\n\tupdateSchoolClass\n}\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(SchoolClassForm)\n"],"sourceRoot":""}