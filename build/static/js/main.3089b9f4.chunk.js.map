{"version":3,"sources":["components/Blog.js","components/Notification.js","components/BlogAddForm.js","services/blogs.js","services/login.js","components/Togglable.js","App.js","index.js"],"names":["Blog","_ref","blog","handleUpdate","handleDelete","currentUserName","_useState","useState","_useState2","Object","slicedToArray","visible","setVisible","showWhenVisible","display","react_default","a","createElement","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","onClick","title","author","url","likes","type","user","id","Notification","message","className","BlogAddForm","onSubmit","handleTitleChange","handleAuthorChange","handleUrlChange","value","onChange","token","services_blogs","getAll","axios","get","then","response","data","setToken","newToken","concat","removeToken","console","log","create","asyncToGenerator","regenerator_default","mark","_callee","newObject","config","wrap","_context","prev","next","headers","Authorization","post","sent","abrupt","stop","_x","apply","this","arguments","update","_ref2","_callee2","request","_context2","put","_x2","_x3","deleteBlog","_ref3","_callee3","_context3","delete","_x4","services_login","login","credentials","Togglable","React","forwardRef","props","ref","hideWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","App","blogs","setBlogs","_useState3","_useState4","setTitle","_useState5","_useState6","setAuthor","_useState7","_useState8","setUrl","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","username","setUsername","_useState13","_useState14","password","setPassword","_useState15","_useState16","setUser","blogFormRef","createRef","useEffect","blogService","initialBlogs","sort","b","reverse","loggedUserJSON","window","localStorage","getItem","JSON","parse","event","target","addBlog","preventDefault","blogObject","returnedBlog","catch","error","setTimeout","finally","handleLogin","_user2","loginService","setItem","stringify","t0","handleLogout","removeItem","document","location","href","exception","updateLikes","confirm","filter","components_Notification","Fragment","name","_ref4","components_Togglable","components_BlogAddForm","map","components_Blog","key","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.3089b9f4.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Blog = ({ blog, handleUpdate, handleDelete, currentUserName }) => {\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      <div onClick={() => setVisible(!visible)}>\r\n        {blog.title} {blog.author}\r\n        <div style={showWhenVisible}>\r\n          {blog.url}\r\n          <br />\r\n          {blog.likes} likes\r\n          <button type=\"button\" onClick={() => handleUpdate(blog)}>like</button>\r\n          <br />\r\n        added by {blog.author}\r\n          <br />\r\n        Author id is: {blog.user.id} <br />\r\n        Current user id is: {currentUserName} <br />\r\n          {currentUserName === blog.author &&\r\n          <button type=\"button\" onClick={() => handleDelete(blog.id)}>delete</button>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\nBlog.propTypes = {\r\n  handleUpdate: PropTypes.func.isRequired,\r\n  handleDelete: PropTypes.func.isRequired,\r\n  blog: PropTypes.object.isRequired,\r\n  currentUserName: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Blog\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst BlogAddForm = ({\r\n  onSubmit,\r\n  title,\r\n  author,\r\n  url,\r\n  handleTitleChange,\r\n  handleAuthorChange,\r\n  handleUrlChange\r\n}) => (\r\n  <form onSubmit={onSubmit}>\r\n    <input\r\n      value={title}\r\n      onChange={handleTitleChange}\r\n    /><br />\r\n    <input\r\n      value={author}\r\n      onChange={handleAuthorChange}\r\n    /><br />\r\n    <input\r\n      value={url}\r\n      onChange={handleUrlChange}\r\n    /><br />\r\n    <button type=\"submit\">create</button>\r\n  </form>\r\n)\r\n\r\nBlogAddForm.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  handleTitleChange: PropTypes.func.isRequired,\r\n  handleAuthorChange: PropTypes.func.isRequired,\r\n  handleUrlChange: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  author: PropTypes.string.isRequired,\r\n  url: PropTypes.string.isRequired\r\n}\r\n\r\nexport default BlogAddForm\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\n// this is the token!\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n  // console.log(`Token is: ${token}`)\r\n}\r\n\r\nconst removeToken = () => console.log('Removing from localStorage')\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteBlog = async id => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  const request = axios.delete(`${baseUrl}/${id}`, config)\r\n  return request\r\n}\r\n\r\nexport default { getAll, setToken, removeToken, create, update, deleteBlog }\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }\r\n","import React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable\r\n","import React, { useState, useEffect } from 'react'\r\nimport Blog from './components/Blog'\r\nimport Notification from './components/Notification'\r\nimport BlogAddForm from './components/BlogAddForm'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\nimport Togglable from './components/Togglable'\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([])\r\n  const [title, setTitle] = useState('New title')\r\n  const [author, setAuthor] = useState('New author')\r\n  const [url, setUrl] = useState('New url')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [user, setUser] = useState(null)\r\n  const blogFormRef = React.createRef()\r\n\r\n  useEffect(() => {\r\n    blogService\r\n      .getAll()\r\n      .then(initialBlogs => {\r\n        initialBlogs.sort(function (a, b) {\r\n          return a.likes - b.likes\r\n        })\r\n        setBlogs(initialBlogs.reverse())\r\n      })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n\r\n  const handleTitleChange = event => {\r\n    setTitle(event.target.value)\r\n  }\r\n  const handleAuthorChange = event => {\r\n    setAuthor(event.target.value)\r\n  }\r\n  const handleUrlChange = event => {\r\n    setUrl(event.target.value)\r\n  }\r\n\r\n  const addBlog = event => {\r\n    event.preventDefault()\r\n\r\n    const blogObject = {\r\n      title: title,\r\n      author: author,\r\n      url: url\r\n    }\r\n\r\n    blogService\r\n      .create(blogObject)\r\n      .then(returnedBlog => {\r\n        setBlogs(blogs.concat(returnedBlog))\r\n        setTitle('')\r\n        setAuthor('')\r\n        setUrl('')\r\n      }).catch(error => {\r\n        setErrorMessage(`Can't add blog: ${error.message}`)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      }).finally(() => {\r\n        setErrorMessage(`Blog added ${blogObject.title} ${blogObject.author}`)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n\r\n    try {\r\n      const user = await loginService.login({\r\n        username, password\r\n      })\r\n\r\n      window.localStorage.setItem(\r\n        'loggedBlogappUser', JSON.stringify(user)\r\n      )\r\n\r\n      blogService.setToken(user.token)\r\n      setUser(user)\r\n      setUsername('')\r\n      setPassword('')\r\n    } catch (exception) {\r\n      setErrorMessage('Wrong credentials')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleLogout = async event => {\r\n    event.preventDefault()\r\n    try {\r\n      localStorage.removeItem('loggedBlogappUser')\r\n      document.location.href='/'\r\n    } catch (exception) {\r\n      setErrorMessage('Can\\'t logout')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n\r\n  }\r\n\r\n  const loginForm = () => (\r\n    <>\r\n      <h4>Login into application</h4>\r\n      <form onSubmit={handleLogin}>\r\n        <div>\r\n          username\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            name=\"Username\"\r\n            onChange={({ target }) => setUsername(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          password\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            name=\"Password\"\r\n            onChange={({ target }) => setPassword(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </>\r\n  )\r\n\r\n  const blogForm = () => (\r\n    <Togglable buttonLabel=\"new blog\" ref={blogFormRef}>\r\n      <BlogAddForm\r\n        onSubmit={addBlog}\r\n        author={author}\r\n        title={title}\r\n        url={url}\r\n        handleTitleChange={handleTitleChange}\r\n        handleAuthorChange={handleAuthorChange}\r\n        handleUrlChange={handleUrlChange}\r\n      />\r\n    </Togglable>\r\n  )\r\n\r\n  const updateLikes = (blog) => {\r\n    const blogObject = {\r\n      title: blog.title,\r\n      author: blog.author,\r\n      url: blog.url,\r\n      likes: blog.likes + 1,\r\n      user: blog.user.id\r\n    }\r\n\r\n    blogService\r\n      .update(blog.id, blogObject)\r\n      /* //??\r\n      .then(returnedBlog => {\r\n        setBlogs(blogs.concat(returnedBlog))\r\n        setTitle('')\r\n        setAuthor('')\r\n        setUrl('')\r\n      })*/\r\n      .catch(error => {\r\n        setErrorMessage(`Can't update blog: ${error.message}`)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      }).finally(() => {\r\n        setErrorMessage(`Blog updated ${blogObject.title} ${blogObject.author}`)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const deleteBlog = id => {\r\n    if (window.confirm(`Do you really want to delete blog with id of: ${id}?`)) {\r\n      blogService\r\n        .deleteBlog(id)\r\n        .then(() => {\r\n          setBlogs(blogs.filter(blog => blog.id !== id))\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(`Can't delete blog: ${error.message}`)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        }).finally(() => {\r\n          setErrorMessage(`Blog deleted ${id}`)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Notification message={errorMessage} />\r\n\r\n      <h2>Login</h2>\r\n\r\n      {user === null ?\r\n        loginForm() :\r\n        <div>\r\n          <p>\r\n            {user.name} logged in\r\n          </p>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleLogout}\r\n          >\r\n              Logout\r\n          </button>\r\n          {blogForm()}\r\n          <h2>Blogs</h2>\r\n          {blogs.map(blog =>\r\n            <Blog\r\n              key={blog.id}\r\n              blog={blog}\r\n              handleUpdate={updateLikes}\r\n              handleDelete={deleteBlog}\r\n              currentUserName={user.username}\r\n            />\r\n          )}\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}